{% extends "auctions/layout.html" %}

{% block title %}
{{ listing.title }}
{% endblock %}

{% block body %}
    <h1>{{ listing.title }}</h1>
    {% if user.is_authenticated %}
        <a href="{% url 'add' listing.id %}">Add to watchlist</a>
        {% if listing in watchlist %}
            <a href="{% url 'remove' listing.id %}">Remove from watchlist</a>
        {% endif %}
    {% endif %}
    <br>
    <img src={{ listing.image }} alt="No photo" width="800">
    {% if listing.bid.value is not None %}
        <h2>Current bid:</h2>
        <h3>${{ listing.bid.value }}</h3>
        {% if listing.bid.user == user %}
            <div><strong>It's your bid</strong></div>
        {% endif %}
    {% else %}
        <h2>Starting bid:</h2>
        <h3>${{ listing.starting }}</h3>
    {% endif %}
    {% if user.is_authenticated %}
        {% if message is not None %}
            <div>{{ message }}</div>
        {% endif %}
        <form action={{ listing.id }} method="POST">
            {% csrf_token %}
            <input type="number" name="value" placeholder="Bid">
            <input type="submit">
        </form>
    {% endif %}
    <h2>Details</h2>
    <ul>
        <li>Listed by {{ listing.user }}</li>
        <li>Category {{ listing.category.name }}</li>
    </ul>
    <h2>Description</h2>
    <br>
    <div>
        {{ listing.description }}
    </div>
{% endblock %}